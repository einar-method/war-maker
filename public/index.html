<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="view-transition" content="same-orgin" />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <link rel="icon" href="data:;base64,iVBORw0KGgo=">
    <link rel="stylesheet" href="hub-style.css">
    <title>WAR | MAKER</title>
</head>
<body>
    <nav>
        <a href="#hub">Home Page</a>
        <a href="#roster">Forces Sheet</a>
        <a href="#war">War Sheet</a>
        <a href="#battle">Battle Map</a>
        <!-- <a href="#third"><ion-icon name="musical-notes"></ion-icon></a> -->
        <a href="#info">Info & FAQ</a>
    </nav>
       
    <div class= 'container'> 
    <section id="hub" class="page">
        <div class="page__welcome-header">
            <h1>W<span class="title__text-green">A</span>R | M<span class="title__text-camo">A</span>KER</h1>
            <img class="logo__main" src="assets/imgs/War Make- logo-clear-trimmed.webp" alt="War Maker anvil">
            <h4>Alpha v0.1: Unit Cards & War Lobbies</h4>
        </div> 
        
        <section class="welcome__login">
            <div class="tab homepage" id="welcomeTab">
                <button class="tab__link" onclick="flipTab(event, 'makeLobbyTab')" id="tiredOfIds">Create Lobby</button>
                <button class="tab__link center" onclick="flipTab(event, 'joinLobbyTab')">Join Lobby</button>
                <button class="tab__link" onclick="flipTab(event, 'loginTab')">Login</button>
            </div>

            <div id="makeLobbyTab" class="tab__content">
                <div>
                    <button id="makeLobby" title="Make a new lobby & generate a join code">Get Code</button>
                    <p id="createLobbyStatus">Your lobby code will display here after you click the "Get Code" button.</p>
                </div>
                <hr>
                <p>TIP: send your lobby code to a friend so they can join you. Or, if you're here to join an existing game, tap the "Join Lobby" tab instead.</p>
            </div>
            <div id="joinLobbyTab" class="tab__content">
                <div>
                    <input type="text" id="joinLobby" class="in-page__input" title="Copy & paste, or type your code" placeholder="Enter a war code" autocomplete="off">
                    <p>Status: <span id="joinLobbyStatus">no code entered yet.</span></p>
                </div>
                
                <hr>
                <p>TIP: enter a code from a friend to join their lobby. Or, if you'd prefer to create a lobby, tap the "Create Lobby" tab instead.</p>
            </div>
            <div id="loginTab" class="tab__content">
                <br>
                <div>
                    <button>Email</button>
                    <button>Google</button>
                    <button>Discord</button>
                    <button>Patreon</button>
                </div>
                <br>
                <hr>
                <p>Under construction, please check back soon.</p>
            </div>
        </section>
    </section>
    
    <section id="roster" class="page grid">
        <div class="page__unit-header">
            <h1><span class="title__text-camo">FORCES</span> | <span class="title__text-green">SHEET</span></h1>
            <div id="points-display-box" class="points-display">
                <!-- onclick="editPoints()" // used above before fb -->
                <p>Points: <span id="points-display"></span></p>
            </div>
            <!-- <button onclick="beginForceCreation()">test</button> -->
        </div>
        
        <div class="card-container" id="cardContainer">

<!-- <section class="force__card" id="exmpleId">
<div class="force__card__labeled-textareas">
    <p class="war-sheet__paragrapgh">FORCE NAME: </p>
    <textarea id="forceCardName" name="forceCardName" rows="1" class="textarea__dynamic" title="Change Force Name" placeholder="Name your force, or leave blank."></textarea>
</div>

    
<div class="force__card__inner">
    <div class="force__card__radio-fieldset">
        <div>
            <input type="radio" id="isRegularForce" class="radio__button" name="forceTypeRadio" value="regular">
            <label for="isRegularForce">REGULAR</label><br>
        </div>
        <div>
            <input type="radio" id="isHeroicFOrce" class="radio__button" name="forceTypeRadio" value="heroic">
            <label for="isHeroicFOrce">HEROIC</label>
        </div>
        <div>
            <input type="radio" id="isEliteForce" class="radio__button" name="forceTypeRadio" value="elite">
            <label for="isEliteForce" class="force__card__label">ELITE</label>
        </div>
        
    </div>
    <div class="force__card__abilities">
        <div class="force__card__labeled-textareas">
            <p class="war-sheet__paragrapgh">ABILITY 1: </p>
           
            <p class="force__card__ability-display"><span id="abil1Display" onclick="toggleAbilitySheet(this, true, 'force__card')">Click to open Ability Sheet.</span></p>
        </div>
        <div class="force__card__labeled-textareas">
            <p class="war-sheet__paragrapgh">ABILITY 2: </p>
            <p class="force__card__ability-display"><span id="abil2Display" onclick="toggleAbilitySheet(this, true, 'force__card')">Click to open Ability Sheet.</span></p>
        </div>
        <div class="force__card__labeled-textareas">
            <p class="war-sheet__paragrapgh">ABILITY 3: </p>
            <p class="force__card__ability-display"><span id="abil3Display" onclick="toggleAbilitySheet(this, true, 'force__card')">Click to open Ability Sheet.</span></p>
        </div>

    </div>
</div>

<div>
    <p class="war-sheet__paragrapgh">NOTES: </p>
    <textarea id="forceCardNotes" name="forceCardNotes" rows="3" class="textarea__dynamic" title="Extra Force Notes" placeholder="Additional notes for this force."></textarea>
</div>

<fieldset class="force__card__stats__container">

        <legend class="force__card__title-bar">STATS:</legend>

            <fieldset>
                <legend>Attack Zone</legend>
                <label for="range">0 Melee | 1-5 Ranged</label>
                <input type="number" id="range" class="form__input" name="range" min="0" max="5" step="1" value="0">
            </fieldset>
            <fieldset>
                <legend>Unit Dice</legend>
                <label for="unitDice">Or # of members</label>
                <input type="number" id="unitDice" class="form__input" name="unitDice" min="0" max="6" step="1" value="6">
            </fieldset>
            <fieldset class="force__card__radio-fieldset">
                <legend>Condition</legend>
                <div>
                    <input type="radio" id="notDead" class="radio__button" name="healthStatus" value="alive">
                    <label for="notDead">Alive</label><br>
                </div>
                <div>
                    <input type="radio" id="isDead" class="radio__button" name="healthStatus" value="dead">
                    <label for="isDead">Dead</label>
                </div>
            </fieldset>
            <fieldset class="force__card__radio-fieldset">
                <legend>Activation</legend>
                <div >
                    <input type="radio" id="notTurn" class="radio__button" name="turnStatus" value="inactive">
                    <label for="notTurn">Inactive</label><br>
                </div>
                <div >
                    <input type="radio" id="yesTurn" class="radio__button" name="turnStatus" value="active">
                    <label for="yesTurn">Active</label>
                </div>
            </fieldset>
            <fieldset class="force__card__radio-fieldset">
                <legend>Cover</legend>
                <div>
                    <input type="radio" id="hasCover" class="radio__button" name="coverStatus" value="cover">
                    <label for="hasCover">Has Cover</label><br>
                </div>
                <div>
                    <input type="radio" id="noCover" class="radio__button" name="coverStatus" value="noCover">
                    <label for="noCover">No Cover</label>
                </div>
            </fieldset>
            <fieldset class="force__card__radio-fieldset">
                <legend>Movement</legend>
                <div>
                    <input type="radio" id="normalSpeed" class="radio__button" name="speedStatus" value="noSlow">
                    <label for="normalSpeed">Normal</label><br>
                </div>
                <div>
                    <input type="radio" id="slowSpeed" class="radio__button" name="speedStatus" value="yesSlow">
                    <label for="slowSpeed">Slowed</label>
                </div>
            </fieldset>
            <fieldset>
                <legend>Reserve Count</legend>
                <input type="number" id="editReserves" class="form__input" name="reserveCount" min="0" max="6" step="1" value="0">
            </fieldset>
            <fieldset>
                <legend>Free Rerolls</legend>
                <input type="number" id="freeRerolls" class="form__input" name="freeRerolls" min="0" max="10" step="1" value="0">
            </fieldset>
            <fieldset>
                <legend>Max Abilities</legend>
                <input type="number" id="maxAbilities" class="form__input" name="maxAbilities" min="1" max="5" step="1" value="1">
            </fieldset>

</fieldset>
</section> -->

        </div>
    
    </section>
    
    <!-- <div class="edit-overlay" id="abilitySheetexmpleId">
        <div class="edit-container">
            <div class="ability__sheet__header-footer">
                <div class="orange"></div>
                <h1><span class="title__text-green">ABILITY</span> <span class="title__text-camo">SHEET</span></h1> 
                <div class="orange"></div>
            </div>

            <div >
                <ul class="ability__sheet__list" >
                    <div>
                        <label class="switch">
                            <input type="checkbox" autocomplete="off">
                            <span class="slider"></span>
                        </label>
                        <li>AGILE: Ignore ROUGH terrain.</li>
                    </div>
                    <div>
                        <label class="switch">
                            <input type="checkbox" autocomplete="off">
                            <span class="slider"></span>
                        </label>
                        <li>ARTILLERY: When HITS are rolled on a ranged attack, divide them in any array between targets in range.</li> 
                    </div>
                    <div>
                        <label class="switch">
                            <input type="checkbox">
                            <span class="slider"></span>
                        </label>
                        <li>ARMOR: Re-roll HITS against this FORCE.</li>
                    </div>
                    <div>
                        <label class="switch">
                            <input type="checkbox">
                            <span class="slider"></span>
                        </label>
                        <li>BUILDERS: This FORCE can spend its turn to create a piece of BLOCK terrain. The new terrain is placed in contact with the BUILDERS.</li>
                    </div>
                    <div>
                        <label class="switch">
                            <input type="checkbox">
                            <span class="slider"></span>
                        </label>
                        <li>BANNER: Allies attacking this FORCE’s target re-roll MISSES.</li>
                    </div>
                    <div>
                        <label class="switch">
                            <input type="checkbox">
                            <span class="slider"></span>
                        </label>
                        <li>BERZERK: When using CHARGE, re-roll MISSES.</li>
                    </div>
                    <div>
                        <label class="switch">
                            <input type="checkbox">
                            <span class="slider"></span>
                        </label>
                        <li>BOLSTER: Use a turn to store 1 die. Give this die to any allied FORCE, usable on any future roll.***</li>
                    </div>
                    <div>
                        <label class="switch">
                            <input type="checkbox">
                            <span class="slider"></span>
                        </label>
                        <li>DEMOLISH: If contacting or in range of a terrain feature, roll 3 HITS to destroy that feature completely, removing it from battle.</li>
                    </div>
                    <div>
                        <label class="switch">
                            <input type="checkbox">
                            <span class="slider"></span>
                        </label>
                        <li>DEFLECT: Use a turn to store 1 die. Expend this die to absorb any 1 single attack in the future, no matter its number of HITS.***</li>
                    </div>
                    
                    
                    <label class="switch">
                        <input type="checkbox">
                        <span class="slider"></span>
                    </label>
                    <li>EVASIVE: Ranged attacks cannot hit this FORCE.</li>
                    <label class="switch">
                        <input type="checkbox">
                        <span class="slider"></span>
                    </label>
                    <li>FAST: Add a pencil to any movement rule when moving this FORCE.</li>
                    <label class="switch">
                        <input type="checkbox">
                        <span class="slider"></span>
                    </label>
                    <li>FLIGHT: This monster can leap or fly. It always DASHES, even when in a CHARGE, and goes over any terrain in its path.</li>
                    <label class="switch">
                        <input type="checkbox">
                        <span class="slider"></span>
                    </label>
                    <li>FURY: If this FORCE makes at least 1 HIT with an attack, it can attack again.***</li>
                    <label class="switch">
                        <input type="checkbox">
                        <span class="slider"></span>
                    </label>
                    <li>HEAT VISION: Ignore the effect of COVER on your targets.</li>
                    <label class="switch">
                        <input type="checkbox">
                        <span class="slider"></span>
                    </label>
                    <li>INTERVENTION: If an ally within 1 pencil is attacked, move there instantly and take the attack. Use only before HIT dice are rolled.</li>
                    <label class="switch">
                        <input type="checkbox">
                        <span class="slider"></span>
                    </label>
                    <li>MARKSMAN: Re-roll MISSES on all ranged attacks.</li>
                    <label class="switch">
                        <input type="checkbox">
                        <span class="slider"></span>
                    </label>
                    <li>MASSIVE: This FORCE functions as BLOCK terrain.***</li>
                    <label class="switch">
                        <input type="checkbox">
                        <span class="slider"></span>
                    </label>
                    <li>MELEE REFLEXES: At the start of your turn, roll 3 HIT dice against any 1 enemy FORCE currently in contact.</li>
                    <label class="switch">
                        <input type="checkbox">
                        <span class="slider"></span>
                    </label>
                    <li>POWER UP: Use a turn to store 1 die. Use that die on any roll in future turns.***</li>
                    <label class="switch">
                        <input type="checkbox">
                        <span class="slider"></span>
                    </label>
                    <li>RALLY POINT: RESERVES arrive at this FORCE’s location instantly.***</li>
                    <label class="switch">
                        <input type="checkbox">
                        <span class="slider"></span>
                    </label>
                    <li>RANGED REFLEXES: At the start of your turn, roll 3 HIT dice against any 1 enemy FORCE within 1 pencil distance.</li>
                    <label class="switch">
                        <input type="checkbox">
                        <span class="slider"></span>
                    </label>                    
                    <li>SIGNAL: If moving towards this FORCE, friendly FORCES gain the FAST ABILITY.</li>
                    <label class="switch">
                        <input type="checkbox">
                        <span class="slider"></span>
                    </label>
                    <li>SNIPER: Used ranged attacks at up to 4 pencils distance.</li>
                    <label class="switch">
                        <input type="checkbox">
                        <span class="slider"></span>
                    </label>
                    <li>STEALTH: Gain BLOCK or COVER benefits of TERRAIN even at up to 1 pencil distance from BLOCK or COVER features.</li>
                    <label class="switch">
                        <input type="checkbox">
                        <span class="slider"></span>
                    </label>
                    <li>TAUNT: Make an enemy FORCE attack this FORCE with its next turn.</li>
                </ul>

            </div>
            
            <div class="ability__sheet__header-footer">
                <div class="orange"></div>
                <button type="button" onclick="toggleAbilitySheet(this, false, 'edit-overlay')"><h1><span class="title__text-green">Save</span> & <span class="title__text-camo">Close</span></h1></button>
                <div class="orange"></div>
            </div>

            <dialog class="dialog__prompt" id="dialog__prompt">
                <p id="dialog-message"></p>
                <div id="button-container">
                    <button onclick="resolveDialog(true)">Yes</button>
                    <button onclick="resolveDialog(false)">Cancel</button>
                </div>
            </dialog>
            <dialog class="description-dialog" >
                <p></p>
            </dialog>
 
        </div>
    </div> -->
    
    <section id= "war" class="page war-sheet__container">
        
        <div class="war-sheet__title-banner">
            <div ></div>
            <h1>War | Sheet</h1>
            <div ></div>
        </div>

        <div class="war-sheet__header">
            <div class="banner__block left orange"><button onclick="step1()">Generate Random War</button></div>
            <p class="war-sheet__paragrapgh">WAR TITLE: <span><textarea id="warTitleSpan" name="warTitleSpan" rows="1" class="textarea__dynamic" spellcheck="false" title="Your war title goes here" placeholder="your war title goes here"></textarea></span></p>
            <div class="banner__block right orange"><button>Get Invite Code</button></div>
        </div>

        <div class="war-sheet__premise">
            <p class="war-sheet__paragrapgh"><label for="warPremise"></label>WAR PREMISE: </label></span></p>
            <textarea id="warPremise" name="warPremise" rows="4" class="textarea__dynamic" spellcheck="false">Lorem ipsum</textarea>
        </div>
        <div class="war-sheet__players">
            <div>
                <p class="war-sheet__paragrapgh">PLAYER 1: </p>
                <textarea id="warP1Span" name="warP1Span" rows="1" class="textarea__dynamic" title="Change Player 1's Name" placeholder="Change your name at will."></textarea>
            </div>
            <div>
                <p class="war-sheet__paragrapgh">PLAYER 1 ARMY: </p>
                <textarea id="warP1ArmySpan" name="warP1ArmySpan" rows="2" class="textarea__dynamic" title="Player 1's Army Description" placeholder="Army description, change as needed."></textarea>
            </div>
            <div>
                <p class="war-sheet__paragrapgh">PLAYER 2: </p>
                <textarea id="warP2Span" name="warP2Span" rows="1" class="textarea__dynamic" title="Change Player 2's Name" placeholder="Change your name at will."></textarea>
            </div>
            <div>
                <p class="war-sheet__paragrapgh">PLAYER 2 ARMY: </p>
                <textarea id="warP2ArmySpan" name="warP2ArmySpan" rows="2" class="textarea__dynamic" title="Player 2's Army Description" placeholder="Army description, change as needed."></textarea>
            </div>
        </div>

        <section class="battle__cards">
            <button class="accordion">BATTLE 1</button>
            <div class="accordion__panel">
                <div class="war-sheet__battle-card spark-card">

                    <div class="tab">
                        <button class="tab__link tab__default" onclick="flipTab(event, 'sparkDetails')">Details</button>
                        <button class="tab__link" onclick="flipTab(event, 'sparkNotes')">Map & Notes</button>
                    </div>

                    <!-- Tab content -->
                    <div id="sparkDetails" class="tab__content">
                        <div style="display: flex;justify-content: space-between;">
                            <h3 class="battle-name">THE SPARK</h3>
                        
                            <fieldset class="war-sheet__battle-card__victory">
                                <legend >Victory</legend>
                                <input type="radio" id="sparkVictoryP1" class="radio__button" name="sparkWinner" value="p1">
                                <label for="sparkVictoryP1">Player 1</label><br>
                                <input type="radio" id="sparkVictoryP2" class="radio__button" name="sparkWinner" value="p2">
                                <label for="sparkVictoryP2">Player 2</label>
                            </fieldset>
                        </div>

                        <div class="war-sheet__battle-card__details">
                            <p class="war-sheet__paragrapgh">STORY: <span><textarea id="sparkStorySpan" name="sparkStorySpan" rows="6" class="textarea__dynamic" title="Story & RP" placeholder="Enter your battle story, or click on 'Generate Random War' at the top to get started with roll tables from the book."></textarea></span></p>
                            <p class="war-sheet__one-line-p">TERRAIN: <span><textarea id="sparkTerrainSpan" name="sparkTerrainSpan" rows="6" class="textarea__dynamic" title="Terrain details" placeholder="Enter any terrain details for the battle here."></textarea></span></p>
                            <p class="war-sheet__one-line-p">SPECIAL: <span><textarea id="sparkSpecialSpan" name="sparkSpecialSpan" rows="6" class="textarea__dynamic" title="Special considerations" placeholder="Enter any special considerations for the battle here."></textarea></span></p>
                            <p class="war-sheet__one-line-p">TO WIN: <span><textarea id="sparkToWin" name="sparkToWin" rows="6" class="textarea__dynamic" title="Win Conditions, not required but fun" placeholder="Enter unique win conditions for either player here."></textarea></span></p>
                        </div>
                        
                    </div>
                    
                    <div id="sparkNotes" class="tab__content">
                        <div class="war-sheet__battle-card__notes">
                            <p class="war-sheet__paragrapgh">NOTES: <span><textarea id="sparkNotesText" name="sparkNotesText" rows="6" class="textarea__dynamic" title="Extra Battle Notes" placeholder="Any additional battle notes can go here."></textarea></span></p>
                            <!-- <div class="war-sheet__battle-card__map">
                                <p>MAP:</p>
                                <img src="" alt="Upload an image">
                            </div> -->
                            <div >
                                <p class="war-sheet__paragrapgh">MAP:</p>
                                <div class="war-sheet__battle-card__map">
                                    <div class="expandable__content-btn-holder map-btns">
                                        <label class="loader" for="sparkMapUpload" onclick="showImage('sparkMapUpload', 'sparkMapImage')">Upload Image</label>
                                        <input type="file" id="sparkMapUpload" accept="image/*" class="image__input" onchange="showImage('sparkMapUpload', 'sparkMapImage')">  
                                        <button class="loader" onclick="removeImage('sparkMapImage')">Delete Image</button>
                                    </div>
                                    <img id="sparkMapImage" src="" alt="Image of Spark  Battlemap">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <button class="accordion">BATTLE 2</button>
            <div class="accordion__panel">
                <div class="war-sheet__battle-card">

                    <div class="tab">
                        <button class="tab__link tab__default" onclick="flipTab(event, 'retaliationDetails')">Details</button>
                        <button class="tab__link" onclick="flipTab(event, 'retaliationNotes')">Map & Notes</button>
                    </div>

                    <!-- Tab content -->
                    <div id="retaliationDetails" class="tab__content">
                        <div style="display: flex;justify-content: space-between;">
                            <h3 class="battle-name">RETALIATION</h3>
                        
                            <fieldset class="war-sheet__battle-card__victory">
                                <legend >Victory</legend>
                                <input type="radio" id="retaliationVictoryP1" class="radio__button" name="retaliationWinner" value="p1">
                                <label for="retaliationVictoryP1">Player 1</label><br>
                                <input type="radio" id="retaliationVictoryP1" class="radio__button" name="retaliationWinner" value="p2">
                                <label for="retaliationVictoryP1">Player 2</label>
                            </fieldset>
                        </div>

                        <div class="war-sheet__battle-card__details">
                            <p class="war-sheet__paragrapgh">STORY: <span><textarea id="retaliationStorySpan" name="retaliationStorySpan" rows="6" class="textarea__dynamic" title="Story & RP" placeholder="Enter your battle story, or click on 'Generate Random War' at the top to get started with roll tables from the book."></textarea></span></p>
                            <p class="war-sheet__one-line-p">TERRAIN: <span><textarea id="retaliationTerrainSpan" name="retaliationTerrainSpan" rows="6" class="textarea__dynamic" title="Terrain details" placeholder="Enter any terrain details for the battle here."></textarea></span></p>
                            <p class="war-sheet__one-line-p">SPECIAL: <span><textarea id="retaliationSpecialSpan" name="retaliationSpecialSpan" rows="6" class="textarea__dynamic" title="Special considerations" placeholder="Enter any special considerations for the battle here."></textarea></span></p>
                            <p class="war-sheet__one-line-p">TO WIN: <span><textarea id="retaliationToWin" name="retaliationToWin" rows="6" class="textarea__dynamic" title="Win Conditions, not required but fun" placeholder="Enter unique win conditions for either player here."></textarea></span></p>
                        </div>
                        
                    </div>
                    
                    <div id="retaliationNotes" class="tab__content">
                        <div class="war-sheet__battle-card__notes">
                            <p class="war-sheet__paragrapgh">NOTES: <span><textarea id="retaliationNotesText" name="retaliationNotesText" rows="6" class="textarea__dynamic" title="Extra Battle Notes" placeholder="Any additional battle notes can go here."></textarea></span></p>
                            <div >
                                <p class="war-sheet__paragrapgh">MAP:</p>
                                <div class="war-sheet__battle-card__map">
                                    <div class="expandable__content-btn-holder map-btns">
                                        <label class="loader" for="retaliationMapUpload" onclick="showImage('retaliationMapUpload', 'retaliationMapDisplay')">Upload Image</label>
                                        <input type="file" id="retaliationMapUpload" accept="image/*" class="image__input" onchange="showImage('retaliationMapUpload', 'retaliationMapDisplay')">  
                                        <button id="removeImage" class="loader" onclick="removeImage('retaliationMapDisplay')">Delete Image</button>
                                    </div>
                                    <img id="retaliationMapDisplay" src="" alt="Image of Retaliation  Battlemap">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <button class="accordion">BATTLE 3</button>
            <div class="accordion__panel">
                <div class="war-sheet__battle-card">

                    <div class="tab">
                        <button class="tab__link tab__default" onclick="flipTab(event, 'openWarDetails')">Details</button>
                        <button class="tab__link" onclick="flipTab(event, 'openWarNotes')">Map & Notes</button>
                    </div>

                    <!-- Tab content -->
                    <div id="openWarDetails" class="tab__content">
                        <div style="display: flex;justify-content: space-between;">
                            <h3 class="battle-name">OPEN WAR</h3>
                        
                            <fieldset class="war-sheet__battle-card__victory">
                                <legend >Victory</legend>
                                <input type="radio" id="openWarVictoryP1" class="radio__button" name="openWarWinner" value="p1">
                                <label for="openWarVictoryP1">Player 1</label><br>
                                <input type="radio" id="openWarVictoryP1" class="radio__button" name="openWarWinner" value="p2">
                                <label for="openWarVictoryP1">Player 2</label>
                            </fieldset>
                        </div>

                        <div class="war-sheet__battle-card__details">
                            <p class="war-sheet__paragrapgh">STORY: <span><textarea id="openWarStorySpan" name="openWarStorySpan" rows="6" class="textarea__dynamic" title="Story & RP" placeholder="Enter your battle story, or click on 'Generate Random War' at the top to get started with roll tables from the book."></textarea></span></p>
                            <p class="war-sheet__one-line-p">TERRAIN: <span><textarea id="openWarTerrainSpan" name="openWarTerrainSpan" rows="6" class="textarea__dynamic" title="Terrain details" placeholder="Enter any terrain details for the battle here."></textarea></span></p>
                            <p class="war-sheet__one-line-p">SPECIAL: <span><textarea id="openWarSpecialSpan" name="openWarSpecialSpan" rows="6" class="textarea__dynamic" title="Special considerations" placeholder="Enter any special considerations for the battle here."></textarea></span></p>
                            <p class="war-sheet__one-line-p">TO WIN: <span><textarea id="openWarToWin" name="openWarToWin" rows="6" class="textarea__dynamic" title="Win Conditions, not required but fun" placeholder="Enter unique win conditions for either player here."></textarea></span></p>
                        </div>
                        
                    </div>
                    
                    <div id="openWarNotes" class="tab__content">
                        <div class="war-sheet__battle-card__notes">
                            <p class="war-sheet__paragrapgh">NOTES: <span><textarea id="openWarNotesText" name="openWarNotesText" rows="6" class="textarea__dynamic" title="Extra Battle Notes" placeholder="Any additional battle notes can go here."></textarea></span></p>
                            <div >
                                <p class="war-sheet__paragrapgh">MAP:</p>
                                <div class="war-sheet__battle-card__map">
                                    <div class="expandable__content-btn-holder map-btns">
                                        <label class="loader" for="openWarMapUpload" onclick="showImage('openWarMapUpload', 'openWarMapDisplay')">Upload Image</label>
                                        <input type="file" id="openWarMapUpload" accept="image/*" class="image__input" onchange="showImage('openWarMapUpload', 'openWarMapDisplay')">  
                                        <button id="removeImage" class="loader" onclick="removeImage('openWarMapDisplay')">Delete Image</button>
                                    </div>
                                    <img id="openWarMapDisplay" src="" alt="Image of Open War  Battlemap">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <button class="accordion">BATTLE 4</button>
            <div class="accordion__panel">
                <div class="war-sheet__battle-card">

                    <div class="tab">
                        <button class="tab__link tab__default" onclick="flipTab(event, 'finalFrontDetails')">Details</button>
                        <button class="tab__link" onclick="flipTab(event, 'finalFrontNotes')">Map & Notes</button>
                    </div>

                    <!-- Tab content -->
                    <div id="finalFrontDetails" class="tab__content">
                        <div style="display: flex;justify-content: space-between;">
                            <h3 class="battle-name">FINAL FRONT</h3>
                        
                            <fieldset class="war-sheet__battle-card__victory">
                                <legend >Victory</legend>
                                <input type="radio" id="finalFrontVictoryP1" class="radio__button" name="finalFrontWinner" value="p1">
                                <label for="finalFrontVictoryP1">Player 1</label><br>
                                <input type="radio" id="finalFrontVictoryP1" class="radio__button" name="finalFrontWinner" value="p2">
                                <label for="finalFrontVictoryP1">Player 2</label>
                            </fieldset>
                        </div>

                        <div class="war-sheet__battle-card__details">
                            <p class="war-sheet__paragrapgh">STORY: <span><textarea id="finalFrontStorySpan" name="finalFrontStorySpan" rows="6" class="textarea__dynamic" title="Story & RP" placeholder="Enter your battle story, or click on 'Generate Random War' at the top to get started with roll tables from the book."></textarea></span></p>
                            <p class="war-sheet__one-line-p">TERRAIN: <span><textarea id="finalFrontTerrainSpan" name="finalFrontTerrainSpan" rows="6" class="textarea__dynamic" title="Terrain details" placeholder="Enter any terrain details for the battle here."></textarea></span></p>
                            <p class="war-sheet__one-line-p">SPECIAL: <span><textarea id="finalFrontSpecialSpan" name="finalFrontSpecialSpan" rows="6" class="textarea__dynamic" title="Special considerations" placeholder="Enter any special considerations for the battle here."></textarea></span></p>
                            <p class="war-sheet__one-line-p">TO WIN: <span><textarea id="finalFrontToWin" name="finalFrontToWin" rows="6" class="textarea__dynamic" title="Win Conditions, not required but fun" placeholder="Enter unique win conditions for either player here."></textarea></span></p>
                        </div>
                        
                    </div>
                    
                    <div id="finalFrontNotes" class="tab__content">
                        <div class="war-sheet__battle-card__notes">
                            <p class="war-sheet__paragrapgh">NOTES: <span><textarea id="finalFrontNotesText" name="finalFrontNotesText" rows="6" class="textarea__dynamic" title="Extra Battle Notes" placeholder="Any additional battle notes can go here."></textarea></span></p>
                            <div >
                                <p class="war-sheet__paragrapgh">MAP:</p>
                                <div class="war-sheet__battle-card__map">
                                    <div class="expandable__content-btn-holder map-btns">
                                        <label class="loader" for="finalFrontMapUpload" onclick="showImage('finalFrontMapUpload', 'finalFrontMapDisplay')">Upload Image</label>
                                        <input type="file" id="finalFrontMapUpload" accept="image/*" class="image__input" onchange="showImage('finalFrontMapUpload', 'finalFrontMapDisplay')">  
                                        <button id="removeImage" class="loader" onclick="removeImage('finalFrontMapDisplay')">Delete Image</button>
                                    </div>
                                    <img id="finalFrontMapDisplay" src="" alt="Image of Final Front  Battlemap">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
        </section>
            
        </div>

    </section>

    <section id= "battle" class="page">
        <div class="page__battle-header">
            <h1>Battle | Map</h1>
        </div>
        <div class="queue">

            <div style="display: grid;gap: .2rem;grid-template-columns: auto 1fr;">
                <div class="info__button-box">
                    <ion-icon id="info-callsign" class="info__button-icon" name="information-circle"></ion-icon>
                </div>
                <input id="player-name" class="in-page__input" maxlength="40" title="Your callsign, edit at will" type="text" />
            </div>
 

            <div style="display: grid;gap: .2rem;grid-template-columns: auto 1fr;">
                <button id="makeLobby" title="Make a new lobby & generate a join code">Make War</button>
                <input type="text" id="joinLobby" class="in-page__input" title="Copy & paste, or type your code" placeholder="Enter a war code" autocomplete="off">
            </div>
            
            <!-- <p id="group-label"></p> -->

            <input type="text" id="msgInput" class="in-page__input" title="Simple message system" placeholder="Write a dispatch" autocomplete="off">
            
            <section id="chat-feed"></section>

        </div>

        <div class="game-container"></div>
    </section>

    <!-- <section id= 'third' class="page">
        <h1>Cadence|Caller</h1>
        <div id="embed-iframe"></div>


    </section> -->

    <section id= 'info' class="page">
        <div class="page__info-header">
            <h1>Info | Holder</h1>
        </div>
        <div class="info__container">
            <h2>Notices</h2>
            <hr class="page__divider_small">
            <p>ANNOUNCEMENT: per Runehammer's request, fonts and colors are being reformatted to align with the War | Maker game. Please excuse the mess while I reformat the color scheme and styles.</p>
            <hr class="page__divider_small">
            <p>IN PROGRESS: increasing accessibility and ease of use compared to the former design. The war sheet and forces sheet are currently be reworked to be more similar to the book.</p>
            <hr class="page__divider_small">
            <p>This web app is a WIP by E•M (maker of the EZ Tools app). It has been optimized for desktop browsers, but does have some mobile support. In no way is this a finished project, nor does its creator have vast experience with web development.</p>
            <p>All information sent to the database is deleted when you refresh or close the browser, however, please do not send any private information. Stay safe friends. Speaking of, if you see trackers on this site, it's because it uses the Firebase realtime database (a Google service). In no way am I collecting analytics or any other data.</p>
            <p>Visit the <a href="https://github.com/einar-method/war-maker" target="_blank">GitHub page</a> if you'd like to check out my spaghetti code, <a href="https://github.com/einar-method/war-maker/issues" target="_blank">log an issue</a>, or <a href="https://github.com/einar-method/war-maker/discussions" target="_blank">start a discussion</a>.</p>
            <p>Or, if you want something easier, fill in this <a href="https://forms.gle/MvadBNNwiFxeabun7" target="_blank">Google Form</a>.</p>
            
            <hr class="page__divider_big">

            <h2>FAQ</h2>
            <p>Press and hold to remove an ability or delete a unit.</p>
            <p>Double tap (double left click with mouse) to add abilities or change unit type.</p>
            <p>Tap once (left click with mouse) to see an ability or unit quality description.</p>
            
            <hr class="page__divider_big">

            <h2>Roadmap</h2>
            <h3>Alpha v0.2</h3>
            <p>Easier bug reporting.</p>
            <p>Battle the AI in an assortment of scenarios.</p>
            <p>Draw the battle map and place your units on it.</p>
            <hr class="page__divider_small">
            <h3>Beta v0.3</h3>
            <p>Opt to save your data upon logout</p>
            <p>Rewrite all combat code to work with War | Maker 2.0.</p>
            <p>Go head to head with other players through the war lobby.</p>
            <p>Login with email or link an external account (such as Google or Discord).</p>
            <hr class="page__divider_small">
            <h3>Beta v0.4</h3>
            <p>Save your campaigns.</p>
            <p>Export your battle logs to share with friends.</p>
            <hr class="page__divider_small">
            <h3>Beta v0.5 - v0.9</h3>
            <p>Adapt the app based on community feedback.</p>
            <p>Resolve all major bugs and issues leading up to Stable Release v1.</p>
            <hr class="page__divider_small">
            <h3>Lofty Ideas</h3>
            <p>Support for community touranments.</p>
            <p>Upload 3D models to use on the battlemap.</p>
            <p>Support for community imagiNation campaigns.</p>
            <p>Compile Steam and mobile app store versions of the app for Runehammer to publish.</p>
            <hr class="page__divider_big">
        </div>
        
    </section>
    </div>

    <dialog class="dialog__prompt" id="dialog__prompt">
        <p id="dialog-message"></p>
        <div id="button-container">
            <button onclick="resolveDialog(true)">Yes</button>
            <button onclick="resolveDialog(false)">Cancel</button>
        </div>
    </dialog>
    <dialog class="description-dialog" >
        <p></p>
    </dialog>

    <dialog class="dialog__prompt" id="dialog__prompt-main">
        <p id="dialog__message-main"></p>
        <div id="button-container">
            <button onclick="resolveDialog(true)">Yes</button>
            <button onclick="resolveDialog(false)">No!</button>
        </div>
    </dialog>

    <dialog class="dialog__prompt" id="dialog__prompt-points">
        <input type="number" name="point-modifier" id="point-modifier" class="in-page__input" title="Edit points here" max="100">
        <div class="dialog__butons-container" id="button-container">
            <button onclick="resolveDialog(true)">Submit</button>
            <button onclick="resolveDialog(false)">Cancel</button>
        </div>
    </dialog>
      


    <!-- <div class="edit-overlay" id="editOverlay">
        <div class="edit-container" id="edit-container">
            <form id="editForm" autocomplete="off">
                
                <fieldset class="type__container">
                    <div class="solid__container">
                        <legend class="solid__title-bar">Unit Type</legend>
                        <div class="expandable__content-wrapper solid__content">
                            <ul class="short-list" id="currentTypeDisplay"></ul>
                            <p id="showTypeDescription">Left click to see unit type desrciption.<br>Shift + Left click to change unit type.</p>
                        </div>
                    </div>
                </fieldset>

                <fieldset class="ability__container">
                    <div class="solid__container">
                        <legend class="solid__title-bar">Current Abilities</legend>
                        <div class="expandable__content-wrapper solid__content">
                            <ul class="short-list" id="currentAbilityDisplay"></ul>
                            <p id="showAbilityDescription">Tap ability for desrciption.<br>Double tap an ability to add it.<br>Press and hold to remove an ability.</p>
                        </div>
                    </div>
                    <hr class="hr__inner">
                    <div class="expandable">
                        <legend class="expandable__title-bar">
                            <span class="expandable__title">All Abilities</span>
                            <ion-icon class="expandable__icon" name="chevron-collapse"></ion-icon>
                        </legend>
                        <div class="expandable__content-wrapper">
                            <div class="expandable__content">
                                <ul id="fullAbilityList"></ul>
                            </div>
                        </div>
                    </div>
                </fieldset> 

                <fieldset class="image__container">
                    <div class="expandable">
                        <legend class="expandable__title-bar">
                            <span class="expandable__title">Image</span>
                            <ion-icon class="expandable__icon" name="chevron-collapse"></ion-icon>
                        </legend>
                        <div class="expandable__content-wrapper">
                            <div id="image__area" class="expandable__content">
                                <div class="expandable__content-btn-holder">
                                    <label class="loader" for="uploadImage">Upload Image</label>
                                    <input type="file" id="uploadImage" name="uploadImage" accept="image/*">
                                    <p id="fileLabel" class="file__label-text"></p>
                                    <button id="removeImage" class="loader">Delete Image</button>
                                </div>
                                <img id="unit-image-display" src="" alt="Unit Image">
                            </div>
                        </div>
                    </div>
                </fieldset>

                <fieldset class="stats__container">
                    <div class="solid__container">
                        <legend class="solid__title-bar">Stats</legend>
            
                        <div class="expandable__content-wrapper solid__content">
                            <fieldset>
                                <legend>Attack Zone</legend>
                                <label for="range">0 Melee | 1-5 Ranged</label>
                                <input type="number" id="range" class="form__input" name="range" min="0" max="5" step="1" value="0">
                            </fieldset>
                            <fieldset>
                                <legend>Unit Dice</legend>
                                <input type="number" id="unitDice" class="form__input" name="unitDice" min="0" max="6" step="1" value="6">
                            </fieldset>
                            <fieldset>
                                <legend>Condition</legend>
                                <input type="radio" id="notDead" class="radio__button" name="healthStatus" value="alive">
                                <label for="notDead">Alive</label><br>
                                <input type="radio" id="isDead" class="radio__button" name="healthStatus" value="dead">
                                <label for="isDead">Dead</label>
                            </fieldset>
                            <fieldset>
                                <legend>Activation</legend>
                                <input type="radio" id="notTurn" class="radio__button" name="turnStatus" value="inactive">
                                <label for="notTurn">Inactive</label><br>
                                <input type="radio" id="yesTurn" class="radio__button" name="turnStatus" value="active">
                                <label for="yesTurn">Active</label>
                            </fieldset>
                            <fieldset>
                                <legend>Cover</legend>
                                <input type="radio" id="hasCover" class="radio__button" name="coverStatus" value="cover">
                                <label for="hasCover">Has Cover</label><br>
                                <input type="radio" id="noCover" class="radio__button" name="coverStatus" value="noCover">
                                <label for="noCover">No Cover</label>
                            </fieldset>
                            <fieldset>
                                <legend>Movement</legend>
                                <input type="radio" id="normalSpeed" class="radio__button" name="speedStatus" value="noSlow">
                                <label for="normalSpeed">Normal</label><br>
                                <input type="radio" id="slowSpeed" class="radio__button" name="speedStatus" value="yesSlow">
                                <label for="slowSpeed">Slowed</label>
                            </fieldset>
                            <fieldset>
                                <legend>Reserve Count</legend>
                                <input type="number" id="editReserves" class="form__input" name="reserveCount" min="0" max="6" step="1" value="0">
                            </fieldset>
                            <fieldset>
                                <legend>Free Rerolls</legend>
                                <input type="number" id="freeRerolls" class="form__input" name="freeRerolls" min="0" max="10" step="1" value="0">
                            </fieldset>
                            <fieldset>
                                <legend>Max Abilities</legend>
                                <input type="number" id="maxAbilities" class="form__input" name="maxAbilities" min="1" max="5" step="1" value="1">
                            </fieldset>
                            <fieldset>
                                <legend>Name</legend>
                                <input type="text" id="editTitle" class="form__input" maxlength="40" name="editTitle">
                            </fieldset>
                        </div>
                    </div>
                </fieldset>

                <div class="btn__container">
                    <div class="solid__container">
                        <div class="solid__title-bar">
                            <button type="button" id="save-edit">Save & Close</button>
                        </div>
                        <div class="expandable__content-wrapper solid__content">
                        </div>
                    </div>
                </div>

                <dialog class="dialog__prompt" id="dialog__prompt">
                    <p id="dialog-message"></p>
                    <div id="button-container">
                        <button onclick="resolveDialog(true)">Yes</button>
                        <button onclick="resolveDialog(false)">Cancel</button>
                    </div>
                </dialog>
                <dialog class="description-dialog" >
                    <p></p>
                </dialog>
            </form>
        </div>
    </div> -->

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/hammerjs"></script>

    <script src="./js/math/controls.js"></script>
    <script src="./js/helpers/messageHandler.js"></script>
    <script src="./js/helpers/playerHandler.js"></script>
    <script src="./js/helpers/promptHandler.js"></script>
    <script src="./js/helpers/domHandler.js"></script>
    <script src="./js/helpers/formHandler.js"></script>
    <script src="./js/helpers/unitHandler.js"></script>
    <script src="./js/helpers/keyPressListener.js"></script>
    <script src="./js/helpers/network.js"></script>
    <script src="./js/helpers/imageHandler.js"></script>
    <script src="./js/math/utils.js"></script>
    <script src="./js/war.js"></script>
    <script src="./js/battle.js"></script>
    <script src="./js/combat.js"></script>
    <script src="./js/commander.js"></script>
    <script src="./js/unit.js"></script>
    <script src="./app.js"></script>
    
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
</body>
</html>