<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="view-transition" content="same-orgin" />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <link rel="icon" href="data:;base64,iVBORw0KGgo=">
    <link rel="stylesheet" href="hub-style.css">
    <title>WAR|MAKER</title>
</head>
<body>
    <nav>
        <a href="#hub"><ion-icon name="planet"></ion-icon></a>
        <a href="#roster"><ion-icon name="add-circle"></ion-icon></a>
        <a href="#battle"><ion-icon name="shield-half"></ion-icon></a>
        <!-- <a href="#third"><ion-icon name="musical-notes"></ion-icon></a> -->
        <a href="#info"><ion-icon name="information-circle"></ion-icon></a>
    </nav>
       
    <div class= 'container'> 
    <section id="hub" class="page">
        <div class="page__welcome-header">
            <h1>WAR<span>|</span>MAKER</h1>
            <h4>Alpha v0.1: Unit Cards & War Lobbies</h4>
        </div>        
    </section>
    
    <section id="roster" class="page grid">
        <div class="page__unit-header">
            <h1>Unit<span>|</span>Roster</h1>
            <div id="points-display-box" class="points-display">
                <!-- onclick="editPoints()" // used above before fb -->
                <p>Points: <span id="points-display"></span></p>
            </div>
        </div>
        
        <div class="card-container" id="cardContainer"></div>
    
    </section>
    
    <section id= "battle" class="page">
        <div class="page__battle-header">
            <h1>Campaign<span>|</span>Builder</h1>
            
        </div>
        <div class="queue">

            <input id="player-name" class="in-page__input" maxlength="40" title="Your callsign, edit at will" type="text" />

            <div style="display: grid;gap: .2rem;grid-template-columns: auto 1fr;">
                <button id="makeLobby" title="Make a new lobby & generate a join code">Make War</button>
                <input type="text" id="joinLobby" class="in-page__input" title="Copy & paste, or type your code" placeholder="Enter a war code" autocomplete="off">
            </div>
            
            <!-- <p id="group-label"></p> -->

            

            <input type="text" id="msgInput" class="in-page__input" title="Simple message system" placeholder="Write a dispatch" autocomplete="off">
            
            <section id="chat-feed"></section>

        </div>

        <!-- <div id="canvas-container">
            <canvas id="sharedCanvas" width="100" height="100"></canvas>
        </div> -->
        <!-- <canvas id="sharedCanvas" width="100" height="100" style="border:1px solid #000;"></canvas> -->

        
        <!-- <p>Under construction. Thank you for your patience.</p> -->
        <div class="game-container"></div>
    </section>

    <!-- <section id= 'third' class="page">
        <h1>Cadence|Caller</h1>
        <div id="embed-iframe"></div>


    </section> -->

    <section id= 'info' class="page">
        <div class="page__battle-header">
            <h1>Info<span>|</span>Holder</h1>
        </div>
        <div class="info__container">
            <h2>Notice</h2>
            <p>This web app is a WIP by Eâ€¢M (maker of the EZ Tools app). It has been optimized for desktop browsers, but does have some mobile support. In no way is this a finished project, nor does its creator have vast experience with web development.</p>
            <p>All information sent to the database is deleted when you refresh or close the browser, however, please do not send any private information. Stay safe friends. Speaking of, if you see trackers on this site, it's because it uses the Firebase realtime database (a Google service). In no way am I collecting analytics or any other data.</p>
            <p>Visit the <a href="https://github.com/einar-method/war-maker" target="_blank">GitHub page</a> if you'd like to check out my spaghetti code, <a href="https://github.com/einar-method/war-maker/issues" target="_blank">log an issue</a>, or <a href="https://github.com/einar-method/war-maker/discussions" target="_blank">start a discussion</a>.</p>
            <p>Or, if you want something easier, fill in this <a href="https://forms.gle/MvadBNNwiFxeabun7" target="_blank">Google Form</a>.</p>
            
            <hr class="page__divider_big">

            <h2>FAQ</h2>
            <p>Press and hold to remove an ability or delete a unit.</p>
            <p>Double tap (double left click with mouse) to add abilities or change unit type.</p>
            <p>Tap once (left click with mouse) to see an ability or unit quality description.</p>
            
            <hr class="page__divider_big">

            <h2>Roadmap</h2>
            <h3>Alpha v0.2</h3>
            <p>Easier bug reporting.</p>
            <p>Battle the AI in an assortment of scenarios.</p>
            <p>Draw the battle map and place your units on it.</p>
            <hr class="page__divider_small">
            <h3>Beta v0.3</h3>
            <p>Opt to save your data upon logout</p>
            <p>Rewrite all combat code to work with War | Maker 2.0.</p>
            <p>Go head to head with other players through the war lobby.</p>
            <p>Login with email or link an external account (such as Google or Discord).</p>
            <hr class="page__divider_small">
            <h3>Beta v0.4</h3>
            <p>Save your campaigns.</p>
            <p>Export your battle logs to share with friends.</p>
            <hr class="page__divider_small">
            <h3>Beta v0.5 - v0.9</h3>
            <p>Adapt the app based on community feedback.</p>
            <p>Resolve all major bugs and issues leading up to Stable Release v1.</p>
            <hr class="page__divider_small">
            <h3>Lofty Ideas</h3>
            <p>Support for community touranments.</p>
            <p>Upload 3D models to use on the battlemap.</p>
            <p>Support for community imagiNation campaigns.</p>
            <p>Compile Steam and mobile app store versions of the app for Runehammer to publish.</p>
            <hr class="page__divider_big">
        </div>
        
    </section>
    </div>


    <dialog class="dialog__prompt" id="dialog__prompt-main">
        <p id="dialog__message-main"></p>
        <div id="button-container">
            <button onclick="resolveDialog(true)">Yes</button>
            <button onclick="resolveDialog(false)">No!</button>
        </div>
    </dialog>

    <dialog class="dialog__prompt" id="dialog__prompt-points">
        <input type="number" name="point-modifier" id="point-modifier" class="in-page__input" title="Edit points here" max="100">
        <div class="dialog__butons-container" id="button-container">
            <button onclick="resolveDialog(true)">Submit</button>
            <button onclick="resolveDialog(false)">Cancel</button>
        </div>
    </dialog>
      


    <div class="edit-overlay" id="editOverlay">
        <div class="edit-container" id="edit-container">
            <form id="editForm" autocomplete="off">
                
                <fieldset class="type__container">
                    <div class="solid__container">
                        <legend class="solid__title-bar">Unit Type</legend>
                        <div class="expandable__content-wrapper solid__content">
                            <ul class="short-list" id="currentTypeDisplay"></ul>
                            <p id="showTypeDescription">Left click to see unit type desrciption.<br>Shift + Left click to change unit type.</p>
                        </div>
                    </div>
                </fieldset>

                <fieldset class="ability__container">
                    <div class="solid__container">
                        <legend class="solid__title-bar">Current Abilities</legend>
                        <div class="expandable__content-wrapper solid__content">
                            <ul class="short-list" id="currentAbilityDisplay"></ul>
                            <!-- <h2>Ability</h2> -->
                            <p id="showAbilityDescription">Tap ability for desrciption.<br>Double tap an ability to add it.<br>Press and hold to remove an ability.</p>
                        </div>
                    </div>
                    <hr class="hr__inner">
                    <div class="expandable">
                        <legend class="expandable__title-bar">
                            <span class="expandable__title">All Abilities</span>
                            <ion-icon class="expandable__icon" name="chevron-collapse"></ion-icon>
                        </legend>
                        <div class="expandable__content-wrapper">
                            <div class="expandable__content">
                                <ul id="fullAbilityList"></ul>
                            </div>
                        </div>
                    </div>
                </fieldset> 
                <!-- end ability container -->

                <fieldset class="image__container">
                    <div class="expandable">
                        <legend class="expandable__title-bar">
                            <span class="expandable__title">Image</span>
                            <ion-icon class="expandable__icon" name="chevron-collapse"></ion-icon>
                        </legend>
                        <div class="expandable__content-wrapper">
                            <div id="image__area" class="expandable__content">
                                <div class="expandable__content-btn-holder">
                                    <label class="loader" for="uploadImage">Upload Image</label>
                                    <input type="file" id="uploadImage" name="uploadImage" accept="image/*">
                                    <p id="fileLabel"></p>
                                    <button id="removeImage" class="loader">Delete Image</button>
                                </div>
                                <img id="unit-image-display" src="" alt="Unit Image">
                            </div>
                        </div>
                    </div>
                </fieldset>

                <fieldset class="stats__container">
                    <div class="solid__container">
                        <legend class="solid__title-bar">Stats</legend>
            
                        <div class="expandable__content-wrapper solid__content">
                            <fieldset>
                                <legend>Attack Zone</legend>
                                <label for="range">0 Melee | 1-5 Ranged</label>
                                <input type="number" id="range" class="form__input" name="range" min="0" max="5" step="1" value="0">
                            </fieldset>
                            <fieldset>
                                <legend>Unit Dice</legend>
                                <input type="number" id="unitDice" class="form__input" name="unitDice" min="0" max="6" step="1" value="6">
                            </fieldset>
                            <fieldset>
                                <legend>Condition</legend>
                                <input type="radio" id="notDead" class="radio__button" name="healthStatus" value="alive">
                                <label for="notDead">Alive</label><br>
                                <input type="radio" id="isDead" class="radio__button" name="healthStatus" value="dead">
                                <label for="isDead">Dead</label>
                            </fieldset>
                            <fieldset>
                                <legend>Activation</legend>
                                <input type="radio" id="notTurn" class="radio__button" name="turnStatus" value="inactive">
                                <label for="notTurn">Inactive</label><br>
                                <input type="radio" id="yesTurn" class="radio__button" name="turnStatus" value="active">
                                <label for="yesTurn">Active</label>
                            </fieldset>
                            <fieldset>
                                <legend>Cover</legend>
                                <input type="radio" id="hasCover" class="radio__button" name="coverStatus" value="cover">
                                <label for="hasCover">Has Cover</label><br>
                                <input type="radio" id="noCover" class="radio__button" name="coverStatus" value="noCover">
                                <label for="noCover">No Cover</label>
                            </fieldset>
                            <fieldset>
                                <legend>Movement</legend>
                                <input type="radio" id="normalSpeed" class="radio__button" name="speedStatus" value="noSlow">
                                <label for="normalSpeed">Normal</label><br>
                                <input type="radio" id="slowSpeed" class="radio__button" name="speedStatus" value="yesSlow">
                                <label for="slowSpeed">Slowed</label>
                            </fieldset>
                            <fieldset>
                                <legend>Reserve Count</legend>
                                <input type="number" id="editReserves" class="form__input" name="reserveCount" min="0" max="6" step="1" value="0">
                            </fieldset>
                            <fieldset>
                                <legend>Free Rerolls</legend>
                                <input type="number" id="freeRerolls" class="form__input" name="freeRerolls" min="0" max="10" step="1" value="0">
                            </fieldset>
                            <fieldset>
                                <legend>Max Abilities</legend>
                                <input type="number" id="maxAbilities" class="form__input" name="maxAbilities" min="1" max="5" step="1" value="1">
                            </fieldset>
                            <fieldset>
                                <legend>Name</legend>
                                <input type="text" id="editTitle" class="form__input" maxlength="40" name="editTitle">
                            </fieldset>
                        </div>
                    </div>
                </fieldset>

                <div class="btn__container">
                    <div class="solid__container">
                        <div class="solid__title-bar">
                            <button type="button" id="save-edit">Save & Close</button>
                        </div>
                        <div class="expandable__content-wrapper solid__content">
                        </div>
                    </div>
                </div>

                <dialog class="dialog__prompt" id="dialog__prompt">
                    <p id="dialog-message"></p>
                    <div id="button-container">
                        <button onclick="resolveDialog(true)">Yes</button>
                        <button onclick="resolveDialog(false)">Cancel</button>
                    </div>
                </dialog>
                <dialog class="description-dialog" >
                    <p></p>
                </dialog>
            </form>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/hammerjs"></script>

    <script src="./js/math/controls.js"></script>
    <script src="./js/helpers/messageHandler.js"></script>
    <script src="./js/helpers/playerHandler.js"></script>
    <script src="./js/helpers/promptHandler.js"></script>
    <script src="./js/helpers/domHandler.js"></script>
    <script src="./js/helpers/formHandler.js"></script>
    <script src="./js/helpers/unitHandler.js"></script>
    <script src="./js/helpers/keyPressListener.js"></script>
    <script src="./js/helpers/network.js"></script>
    <script src="./js/helpers/imageHandler.js"></script>
    <script src="./js/math/utils.js"></script>
    <script src="./js/unit.js"></script>
    <script src="./app.js"></script>
    
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
</body>
</html>